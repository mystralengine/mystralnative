# Linux

Platform-specific information for running Mystral Native.js on Linux.

## System Requirements

- x64 processor
- Vulkan-capable GPU
- glibc 2.31+ (Ubuntu 20.04+, Fedora 32+, etc.)

## Recommended Build

```
mystral-linux-x64-v8-dawn.zip
```

**V8 + Dawn** is recommended for full WebGPU shader compatibility on Linux.

## Installation

### Quick Install

```bash
curl -fsSL https://mystralengine.github.io/mystralnative/install.sh | bash
```

### Manual Install

```bash
# Download
curl -L -o mystral.zip https://github.com/mystralengine/mystralnative/releases/latest/download/mystral-linux-x64-v8-dawn.zip

# Extract
unzip mystral.zip
cd mystral-linux-x64-v8-wgpu

# Make executable
chmod +x mystral

# Run
./mystral --version
```

### System-wide Install

```bash
sudo mv mystral /usr/local/bin/
```

## Dependencies

### Ubuntu/Debian

```bash
sudo apt install \
    libvulkan1 \
    libx11-6 \
    libxrandr2 \
    libxcursor1 \
    libxi6
```

### Fedora

```bash
sudo dnf install \
    vulkan-loader \
    libX11 \
    libXrandr \
    libXcursor \
    libXi
```

### Arch Linux

```bash
sudo pacman -S vulkan-icd-loader libx11 libxrandr libxcursor libxi
```

## Building from Source

### Prerequisites

```bash
# Ubuntu/Debian
sudo apt install \
    build-essential \
    cmake \
    ninja-build \
    libx11-dev \
    libxrandr-dev \
    libxcursor-dev \
    libxi-dev \
    libvulkan-dev

# Fedora
sudo dnf install \
    gcc-c++ \
    cmake \
    ninja-build \
    libX11-devel \
    libXrandr-devel \
    libXcursor-devel \
    libXi-devel \
    vulkan-devel
```

### Build Commands

```bash
git clone https://github.com/mystralengine/mystralnative.git
cd mystralnative

# Install bun
curl -fsSL https://bun.sh/install | bash

bun install
bun run deps:download
bun run configure
bun run build

./build/mystral --version
```

## Available Configurations

| JS Engine | WebGPU Backend | Notes |
|-----------|----------------|-------|
| V8 | Dawn | Recommended, Vulkan backend |
| V8 | wgpu-native | Alternative Vulkan backend |
| QuickJS | wgpu-native | Smaller binary |

## GPU Drivers

### NVIDIA

```bash
# Ubuntu
sudo apt install nvidia-driver-535

# Or use NVIDIA's official installer
```

### AMD (Mesa)

```bash
# Ubuntu
sudo apt install mesa-vulkan-drivers

# Fedora
sudo dnf install mesa-vulkan-drivers
```

### Intel (Mesa)

```bash
# Ubuntu
sudo apt install mesa-vulkan-drivers

# Fedora
sudo dnf install mesa-vulkan-drivers
```

## Verify Vulkan

Check Vulkan is working:

```bash
vulkaninfo | head -20

# Or install vulkan-tools if not available
sudo apt install vulkan-tools  # Ubuntu
sudo dnf install vulkan-tools  # Fedora
```

## Known Issues

### Missing Vulkan

If you see "No Vulkan adapters found":

1. Install Vulkan drivers for your GPU
2. Ensure GPU drivers are up to date
3. Check `/etc/vulkan/icd.d/` for ICD files

### X11 vs Wayland

Mystral Native.js currently requires X11. On Wayland:

```bash
# Run with XWayland
GDK_BACKEND=x11 mystral run game.js
```

### Audio Issues

If audio doesn't work:

```bash
# Check PulseAudio/PipeWire is running
pactl info

# Try with ALSA directly
SDL_AUDIODRIVER=alsa mystral run game.js
```

## Performance Tips

- **Mesa drivers**: Keep Mesa up to date for best Vulkan performance
- **V8 JIT**: Provides significant JavaScript performance improvements
- **Proprietary drivers**: NVIDIA proprietary drivers may perform better than nouveau

## Next Steps

- [Running Games](/mystralnative/docs/guides/running-games) - CLI usage
- [Building from Source](/mystralnative/docs/guides/building) - Build options
