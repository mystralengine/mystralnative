# Configuration

Configure Mystral Native.js behavior at build time and runtime.

## Runtime Configuration

### Command Line Options

```bash
mystral run game.js \
    --width 1920 \
    --height 1080 \
    --title "My Game"
```

| Option | Default | Description |
|--------|---------|-------------|
| `--width` | 1280 | Window width in pixels |
| `--height` | 720 | Window height in pixels |
| `--title` | "Mystral Native.js" | Window title |
| `--headless` | false | Run without window |
| `--screenshot` | - | Take screenshot and exit |
| `--frames` | 60 | Frames before screenshot |

### Environment Variables

```bash
# Enable debug logging
MYSTRAL_DEBUG=1 mystral run game.js

# Custom asset path
MYSTRAL_ASSET_PATH=/path/to/assets mystral run game.js

# Load an external bundle file
MYSTRAL_BUNDLE=path/to/game.bundle mystral run game.js

# Force headless mode
MYSTRAL_HEADLESS=1 mystral run game.js

# Increase V8 heap size for complex scenes
V8_FLAGS="--max-old-space-size=4096" mystral run game.js
```

## Build Configuration

### CMake Options

| Option | Default | Description |
|--------|---------|-------------|
| `MYSTRAL_USE_V8` | OFF | Use V8 engine (recommended) |
| `MYSTRAL_USE_QUICKJS` | ON | Use QuickJS engine (smallest binary) |
| `MYSTRAL_USE_JSC` | OFF | Use JavaScriptCore (macOS/iOS) |
| `MYSTRAL_USE_DAWN` | OFF | Use Dawn (recommended for desktop) |
| `MYSTRAL_USE_WGPU` | ON | Use wgpu-native |
| `MYSTRAL_BUILD_EXAMPLES` | ON | Build example files |
| `MYSTRAL_BUILD_TESTS` | OFF | Build test suite |

### Example Configurations

```bash
# Minimal build (smallest binary)
cmake -B build \
    -DMYSTRAL_USE_QUICKJS=ON \
    -DMYSTRAL_USE_WGPU=ON \
    -DMYSTRAL_BUILD_EXAMPLES=OFF

# Full-featured desktop build
cmake -B build \
    -DMYSTRAL_USE_V8=ON \
    -DMYSTRAL_USE_DAWN=ON \
    -DCMAKE_BUILD_TYPE=Release
```

## WebGPU Configuration

### Adapter Selection

By default, Mystral Native.js requests a high-performance adapter:

```javascript
const adapter = await navigator.gpu.requestAdapter({
    powerPreference: "high-performance"
});
```

### Device Limits

Request specific device limits:

```javascript
const device = await adapter.requestDevice({
    requiredLimits: {
        maxBindGroups: 4,
        maxUniformBufferBindingSize: 65536
    }
});
```

## Window Configuration

### Fullscreen Mode

```javascript
// Request fullscreen (not yet implemented)
// canvas.requestFullscreen();
```

### High DPI

Mystral Native.js automatically handles high DPI displays. The canvas size matches the physical pixel dimensions.

```javascript
// Get actual pixel dimensions
const width = canvas.width;   // Physical pixels
const height = canvas.height; // Physical pixels
```

## Asset Loading

### Base Path

Assets are loaded relative to the script location:

```javascript
// If script is at /game/main.js
// This loads /game/assets/model.glb
const response = await fetch("file://./assets/model.glb");
```

### HTTP/HTTPS

Network requests work as expected:

```javascript
// Load from URL
const response = await fetch("https://example.com/assets/model.glb");
```

## Next Steps

- [CLI Commands](/mystralnative/docs/api/cli) - Full CLI reference
- [JavaScript APIs](/mystralnative/docs/api/javascript) - Supported APIs
