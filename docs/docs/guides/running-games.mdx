# Running Games

Learn how to run and configure games with Mystral Native.js.

## Basic Usage

```bash
mystral run <script.js> [options]
```

The `run` command executes a JavaScript or TypeScript file with full WebGPU support.

## Window Configuration

Control the window size and appearance:

```bash
# Custom resolution
mystral run game.js --width 1920 --height 1080

# Custom window title
mystral run game.js --title "My Awesome Game"

# Combined
mystral run game.js --width 1280 --height 720 --title "Demo"
```

## Watch Mode

Auto-reload your script when files change during development:

```bash
# Watch for file changes and reload automatically
mystral run game.js --watch

# Short form
mystral run game.js -w

# Combine with other options
mystral run game.js --watch --width 1920 --height 1080
```

When the watched file changes:
1. All timers (setTimeout/setInterval) are cleared
2. All requestAnimationFrame callbacks are cancelled
3. Module caches are cleared
4. The script is re-executed from scratch

This enables fast iteration without restarting the runtime.

## Headless Mode

Run without displaying a window (useful for CI/testing):

```bash
# Run headless
mystral run game.js --headless

# Run headless and take a screenshot
mystral run game.js --headless --screenshot output.png

# Wait for specific frame count before screenshot
mystral run game.js --headless --screenshot output.png --frames 120

# Suppress output (quiet mode)
mystral run game.js --headless --quiet
```

## TypeScript Support

Mystral Native.js automatically transpiles TypeScript files:

```bash
# TypeScript works out of the box
mystral run game.ts

# ES modules are supported
mystral run src/main.ts
```

## ES Modules

Use standard ES module imports:

```javascript
// main.js
import { Game } from './game.js';
import { Renderer } from './renderer.js';

const game = new Game();
```

```bash
mystral run main.js
```

## File Paths

When loading assets, use the `file://` protocol for local files:

```javascript
// Relative to script directory
const response = await fetch("file://./assets/model.glb");

// Absolute path
const config = await fetch("file:///home/user/game/config.json");
```

## Environment Variables

Access environment variables via `process.env`:

```javascript
const debugMode = process.env.DEBUG === "true";
const apiKey = process.env.API_KEY;
```

```bash
DEBUG=true mystral run game.js
```

## Exit Codes

- `0` - Success
- `1` - Script error
- `137` - Audio shutdown (known macOS issue, audio works correctly during runtime)

## Next Steps

- [CLI Commands](/mystralnative/docs/api/cli) - Full CLI reference
- [Building from Source](/mystralnative/docs/guides/building) - Custom builds
